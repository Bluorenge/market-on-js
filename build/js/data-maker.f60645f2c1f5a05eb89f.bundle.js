!function(){var e={152:function(e){var t;t=function(){return function(){var e={686:function(e,t,n){"use strict";n.d(t,{default:function(){return S}});var r=n(279),a=n.n(r),o=n(370),i=n.n(o),c=n(817),u=n.n(c);function l(e){try{return document.execCommand(e)}catch(e){return!1}}var d=function(e){var t=u()(e);return l("cut"),t},s=function(e,t){var n=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(r,"px"),n.setAttribute("readonly",""),n.value=e,n}(e);t.container.appendChild(n);var r=u()(n);return l("copy"),n.remove(),r},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof e?n=s(e,t):e instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==e?void 0:e.type)?n=s(e.value,t):(n=u()(e),l("copy")),n};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"copy":t,r=e.container,a=e.target,o=e.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==a){if(!a||"object"!==p(a)||1!==a.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&a.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return o?f(o,{container:r}):a?"cut"===n?d(a):f(a,{container:r}):void 0};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function g(e,t){var n="data-clipboard-".concat(e);if(t.hasAttribute(n))return t.getAttribute(n)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,e);var t,n,r,a=b(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=a.call(this)).resolveOptions(t),n.listenClick(e),n}return t=o,n=[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===y(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=i()(e,"click",(function(e){return t.onClick(e)}))}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget,n=this.action(t)||"copy",r=m({action:n,container:this.container,target:this.target(t),text:this.text(t)});this.emit(r?"success":"error",{action:n,text:r,trigger:t,clearSelection:function(){t&&t.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(e){return g("action",e)}},{key:"defaultTarget",value:function(e){var t=g("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return g("text",e)}},{key:"destroy",value:function(){this.listener.destroy()}}],r=[{key:"copy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return f(e,t)}},{key:"cut",value:function(e){return d(e)}},{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach((function(e){n=n&&!!document.queryCommandSupported(e)})),n}}],n&&v(t.prototype,n),r&&v(t,r),o}(a()),S=A},828:function(e){if("undefined"!=typeof Element&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}e.exports=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},438:function(e,t,n){var r=n(828);function a(e,t,n,r,a){var i=o.apply(this,arguments);return e.addEventListener(n,i,a),{destroy:function(){e.removeEventListener(n,i,a)}}}function o(e,t,n,a){return function(n){n.delegateTarget=r(n.target,t),n.delegateTarget&&a.call(e,n)}}e.exports=function(e,t,n,r,o){return"function"==typeof e.addEventListener?a.apply(null,arguments):"function"==typeof n?a.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return a(e,t,n,r,o)})))}},879:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},370:function(e,t,n){var r=n(879),a=n(438);e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(r.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,n)})),{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,n)}))}}}(e,t,n);if(r.string(e))return function(e,t,n){return a(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(e){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),a=document.createRange();a.selectNodeContents(e),r.removeAllRanges(),r.addRange(a),t=r.toString()}return t}},279:function(e){function t(){}t.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function a(){r.off(e,a),t.apply(n,arguments)}return a._=t,this.on(e,a,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,a=n.length;r<a;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],a=[];if(r&&t)for(var o=0,i=r.length;o<i;o++)r[o].fn!==t&&r[o].fn._!==t&&a.push(r[o]);return a.length?n[e]=a:delete n[e],this}},e.exports=t,e.exports.TinyEmitter=t}},t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n(686)}().default},e.exports=t()},81:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return!!e&&"[object Object]"===Object.prototype.toString.call(e)},t.isEmpty=function(e){return t.isObject(e)&&0===Object.keys(e).length},t.checkAgainstPredicate=function(e,n){return t.isObject(e)&&t.isObject(n)&&Object.keys(n).every((function(t){return Object.prototype.hasOwnProperty.call(e,t)&&n[t]===e[t]}))}},368:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],i=0,c=o.length;i<c;i++,a++)r[a]=o[i];return r};Object.defineProperty(t,"__esModule",{value:!0});var o=n(81);function i(e,t,n,a){if(void 0!==e){var c=function(e){if(!o.isObject(e))return e;var c=r({},e);return Object.keys(c).forEach((function(e){var u;(o.isObject(c[e])||Array.isArray(c[e]))&&(c=r(r({},c),((u={})[e]=i(c[e],t,n,a),u)))})),c};return!Array.isArray(e)&&!o.isObject(e)||o.isEmpty(t)||o.isEmpty(n)?e:Array.isArray(e)?function(e){var r=[],i=e.map((function(e,n){var a=c(e);return o.checkAgainstPredicate(a,t)&&r.push(n),a}));if(r.length>0)for(var u=0;u<r.length;u+=1)i.splice(r[u]+u+(a?0:1),0,n);return i}(e):c(e)}}t.appendProps=function e(t,n,a){if(void 0!==t){var i=function(t){if(!o.isObject(t))return t;var i=r({},t);return o.checkAgainstPredicate(i,n)&&(i=r(r({},i),a)),Object.keys(i).forEach((function(t){var c;(o.isObject(i[t])||Array.isArray(i[t]))&&(i=r(r({},i),((c={})[t]=e(i[t],n,a),c)))})),i};return!Array.isArray(t)&&!o.isObject(t)||o.isEmpty(n)||o.isEmpty(a)?t:Array.isArray(t)?t.map((function(e){return i(e)})):i(t)}},t.replaceObject=function e(t,n,a){if(void 0!==t){var i=function(t){if(!o.isObject(t))return t;var i=r({},t);return o.checkAgainstPredicate(i,n)&&(i=r({},a)),Object.keys(i).forEach((function(t){var c;(o.isObject(i[t])||Array.isArray(i[t]))&&(i=r(r({},i),((c={})[t]=e(i[t],n,a),c)))})),i};return!Array.isArray(t)&&!o.isObject(t)||o.isEmpty(n)||o.isEmpty(a)?t:Array.isArray(t)?t.map((function(e){return i(e)})):i(t)}},t.changeProps=function e(t,n,a){if(void 0!==t){var i=function(t){if(!o.isObject(t))return t;var i=r({},t);return o.checkAgainstPredicate(i,n)&&Object.keys(a).forEach((function(e){var t;Object.prototype.hasOwnProperty.call(i,e)&&(i=r(r({},i),((t={})[e]=a[e],t)))})),Object.keys(i).forEach((function(t){var c;(o.isObject(i[t])||Array.isArray(i[t]))&&(i=r(r({},i),((c={})[t]=e(i[t],n,a),c)))})),i};return!Array.isArray(t)&&!o.isObject(t)||o.isEmpty(n)||o.isEmpty(a)?t:Array.isArray(t)?t.map((function(e){return i(e)})):i(t)}},t.removeObject=function e(t,n){if(void 0!==t){var a=function(t){if(!o.isObject(t))return t;var a=r({},t);return Object.keys(a).forEach((function(t){var i;(o.isObject(a[t])||Array.isArray(a[t]))&&(a=r(r({},a),((i={})[t]=e(a[t],n),i)))})),a};return!Array.isArray(t)&&!o.isObject(t)||o.isEmpty(n)?t:Array.isArray(t)?t.filter((function(e){return!o.checkAgainstPredicate(e,n)})).map((function(e){return a(e)})):o.checkAgainstPredicate(t,n)?void 0:a(t)}},t.returnFound=function e(t,n){if(void 0!==t){var i=void 0,c=function(e){e&&!o.isEmpty(e)&&(i=i?Array.isArray(i)?a(i,[r({},e)]):[i,r({},e)]:e)},u=function(t){o.checkAgainstPredicate(t,n)&&c(t),Object.keys(t).forEach((function(r){(o.isObject(t[r])||Array.isArray(t[r]))&&c(e(t[r],n))}))};return!Array.isArray(t)&&!o.isObject(t)||o.isEmpty(n)?t:(Array.isArray(t)?t.map((function(e){return u(e)})):u(t),i)}},t.insertObjectBefore=function(e,t,n){return i(e,t,n,!0)},t.insertObjectAfter=function(e,t,n){return i(e,t,n,!1)}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}!function(){"use strict";function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r=function(e,t,n){return'\n    <fieldset id="'.concat(e,'" class="data-maker__fields data-maker__fields--category">\n      <div class="data-maker__fields-top">\n        <h2 class="data-maker__fields-title">\n        ').concat(void 0!==n?"".concat(n.name):'Добавление <span class="data-maker__fields-title-type">'.concat(t,"</span>"),'\n        </h2>\n        <div class="data-maker__hide-btn">Скрыть</div>\n        <div class="data-maker__delete-btn data-maker__delete-btn--fields"></div>\n      </div>\n      <div class="data-maker__fields-content">\n        <label class="data-maker__field-wrap">\n          <h3 class="data-maker__name-field">Название ').concat(t,' *</h3>\n          <input class="data-maker__input data-maker__input--name" type="text" name="category-id-').concat(e,'" placeholder="Название ').concat(t,'" \n          ').concat(void 0!==n?'value="'.concat(n.name,'"'):"",' required>\n        </label>\n        <label class="data-maker__field-wrap">\n          <h3 class="data-maker__name-field data-maker__name-field--new-line">\n            Картинка ').concat(t,' <span>(название картинки из редактора)</span>\n          </h3>\n          <input class="data-maker__input data-maker__input--img" type="text" name="img-category-id-').concat(e,'" placeholder="Название картинки" \n          ').concat(void 0!==n?'value="'.concat(n.img,'"'):"",'>\n        </label>\n      </div>\n      <div class="data-maker__add data-maker__add--product" tabindex="0">\n        + Добавить товар\n      </div>\n      <div class="data-maker__add data-maker__add--subcategory" tabindex="0">\n        + Добавить подкатегорию\n      </div>\n    </fieldset>\n  ')},a=function(e,t){return'\n    <fieldset id="'.concat(e,'" class="data-maker__fields data-maker__fields--product">\n      <div class="data-maker__fields-top">\n        <h2 class="data-maker__fields-title">\n          ').concat(void 0!==t?"".concat(t.name):"Добавление товара",'\n        </h2>\n        <div class="data-maker__hide-btn">Скрыть</div>\n        <div class="data-maker__delete-btn data-maker__delete-btn--fields"></div>   \n      </div>\n      <div class="data-maker__fields-content">\n        <div class="data-maker__field-wrap">\n          <h3 class="data-maker__name-field">Название товара *</h3>\n          <input class="data-maker__input data-maker__input--name" type="text" name="name-product-id-').concat(e,'" placeholder="Название товара" \n          ').concat(void 0!==t?'value="'.concat(t.name,'"'):"",' required>\n          <span>В наличии:</span>\n          <input class="data-maker__input data-maker__input--product-active" type="checkbox"\n          ').concat(void 0!==t?t.active?"checked":"":"checked",'>\n        </div>\n        <label class="data-maker__field-wrap">\n          <h3 class="data-maker__name-field data-maker__name-field--new-line">Название картинки <span>(название файла из редактора)</span></h3>\n          <input class="data-maker__input data-maker__input--img" type="text" name="img-product-id-').concat(e,'" placeholder="Название картинки" \n          ').concat(void 0!==t?'value="'.concat(t.img,'"'):"",'>\n        </label>\n        <label class="data-maker__field-wrap">\n          <h3 class="data-maker__name-field">Цена товара *</h3>\n          <input class="data-maker__input data-maker__input--price-product" type="number" name="price-product-id-').concat(e,'" placeholder="Цена товара" \n          ').concat(void 0!==t?'value="'.concat(t.price,'"'):"",' required>\n        </label>\n      </div>\n      <div class="data-maker__add data-maker__add--desc" tabindex="0">\n        + Добавить описание\n      </div>\n      <div class="data-maker__add data-maker__add--option-wrap" tabindex="0">\n        + Добавить товару опцию\n      </div>\n    </fieldset>\n  ')},o=function(e,t){return'\n    <label class="data-maker__field-wrap data-maker__field-wrap--desc">\n      <div class="data-maker__fields-top">\n        <h3 class="data-maker__name-field">Описание товара:</h3>\n        <div class="data-maker__delete-btn data-maker__delete-btn--desc"></div>\n      </div>  \n      <textarea class="data-maker__input data-maker__input--desc-product" name="desc-product-id-'.concat(e,'" placeholder="Поддерживает перенос строк">').concat(void 0!==t?t:"","</textarea>\n    </label>\n  ")},i=function(t,n,r){return'\n    <div class="data-maker__option-item">\n      <label class="data-maker__option-field-wrap">\n        <h4 class="data-maker__name-field">Опция <span class="data-maker__option-num">'.concat(n,'</span></h4>\n        <input class="data-maker__input data-maker__input--option-name data-maker__input--option-').concat(void 0!==r?r:n,'-product" type="text" name="option-').concat(n,"-product-id-").concat(t,'" placeholder="Например: M"\n        ').concat(void 0!==r?'value="'.concat(r.map((function(t){return e(t,1)[0]}))[0],'"'):"",' required>\n      </label>\n      <label class="data-maker__option-field-wrap">\n        <span class="data-maker__name-field">Цена</span>\n        <input class="data-maker__input data-maker__input--option-price" type="number" placeholder="Введите цену товара"\n        ').concat(void 0!==r?'value="'.concat(r.map((function(t){return e(t,2)[1]}))[1],'"'):"",' required>\n      </label>\n      <label class="data-maker__option-field-wrap">\n        <input class="data-maker__input data-maker__input--option-active" type="checkbox"\n        ').concat(void 0!==r?!0===r.map((function(t){return e(t,2)[1]}))[0]?"checked":"":"checked",">\n        <span>Сделать активной</span>\n      </label>\n    </div>\n  ")},c=function(e,t){return'\n    <div class="data-maker__option-wrap">\n      <label class="data-maker__field-wrap">\n        <div class="data-maker__fields-top">\n          <h3 class="data-maker__name-field">Название группы опций</h3>\n          <div class="data-maker__delete-btn data-maker__delete-btn--option"></div>\n        </div>\n        <input class="data-maker__input data-maker__input--option-list-name" type="text" name="option-title-product-id-'.concat(e,'" placeholder="Название опции" required\n        ').concat(void 0!==t?'value="'.concat(t.nameOptionList,'"'):"",'>\n      </label>\n      <div class="data-maker__option">\n      ').concat(void 0!==t?t.optionList.map((function(t,n){return i(e,n+1,Object.entries(t))})).join(""):i(e,1),'\n      </div>\n      <div class="data-maker__add data-maker__add--option-item" tabindex="0">+ Добавить опцию</div>\n    </div>\n  ')};var u=function e(t,n,r){return n.reduce((function(n,a){return n||(a[t]===r?a:a.subCategory?e(t,a.subCategory,r):a.productsInCategory?e(t,a.productsInCategory,r):void 0)}),null)},l=function(e,t,n){var r;return function(){var a=this,o=arguments,i=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(a,o)}),t),i&&e.apply(a,o)}},d=n(368),s=n(152);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=13,b=document.querySelector(".data-maker__wrap"),h=b.querySelector(".data-maker__input--user-id"),k=b.querySelector(".data-maker__input--currency"),g=b.querySelector(".data-maker__entry-point"),A=g.querySelector(".data-maker__add--product"),S=g.querySelector(".data-maker__add--category"),j={userId:"",currency:""},O=[],w=1,x=b.querySelector(".data-maker__btn"),E=document.querySelector(".data-maker__block-info"),q=E.querySelector(".data-maker__block-info-text"),L=new s(E.querySelector(".data-maker__block-info-btn-copy")),T=function(e,t){var n;"product"===e?n=a(w):"category"===e&&(n=r(w,"категории")),t.insertAdjacentHTML("beforebegin",n);var o={id:w,name:""};"product"===e&&(o.price=0,o.active=!0),O.push(o),w++},C=function(e){var t=Number(e.id);return u("id",O,t)},P=function(){var e=m(b.querySelectorAll(".data-maker__input"));e.splice(0,2),e.forEach((function(e){e.oninput=l((function(t){var n=t.path.find((function(e){return e.classList.contains("data-maker__fields")})),r=C(n);!function(e,t,n){var r=e.querySelector(".data-maker__input--name");r===n&&(t.name=r.value,e.querySelector(".data-maker__fields-title").textContent=r.value)}(n,r,e);var a=n.querySelector(".data-maker__input--product-active");if(e===a&&(r.active=e.checked),function(e,t,n,r){var a=e.querySelector(t);n[r]=a.value}(n,".data-maker__input--img",r,"img"),n.classList.contains("data-maker__fields--product")){var o=n.querySelector(".data-maker__input--price-product");r.price=Number(o.value);var i=n.querySelector(".data-maker__input--desc-product");null!==i&&e===i&&(r.desc=e.value.replace(/\n/g,"<br />"));var c=n.querySelector(".data-maker__option-wrap");if(null!==c){var u=c.querySelector(".data-maker__input--option-list-name");e===u&&(r.options.nameOptionList=e.value);var l,s=f(c.querySelectorAll(".data-maker__option-item"));try{for(s.s();!(l=s.n()).done;){var m,y,v,_=l.value,b=_.querySelector(".data-maker__option-num").textContent,h=_.querySelector(".data-maker__input--option-name"),k=_.querySelector(".data-maker__input--option-active"),g=_.querySelector(".data-maker__input--option-price"),A=r.options.optionList[b-1];if(e===h)O=d.replaceObject(O,A,(p(m={},e.value,k.checked),p(m,"price",Number(g.value)),m));if(e===g)O=d.replaceObject(O,A,(p(y={},h.value,k.checked),p(y,"price",Number(g.value)),y));if(e===k)O=d.replaceObject(O,A,(p(v={},h.value,e.checked),p(v,"price",Number(g.value)),v))}}catch(e){s.e(e)}finally{s.f()}}}console.log("productList :",O)}),500)}))},N=function(){var e=event.target,t=e.closest(".data-maker__entry-point"),n=g.querySelector(".message-to-create");null!==n&&n.remove(),null!==t&&(A===e&&T("product",t),S===e&&T("category",t));var u=e.closest(".data-maker__fields");if(null!==u){var l=C(u);if(function(e,t,n){var r=m(t.children).filter((function(e){return e.classList.contains("data-maker__add--product")}))[0],o=t.querySelector(".data-maker__add--subcategory");r===e&&(r.insertAdjacentHTML("beforebegin",a(w)),null!==o&&o.remove(),"productsInCategory"in n?n.productsInCategory.push({id:w,name:"",price:0,active:!0}):O=d.appendProps(O,n,{productsInCategory:[{id:w,name:"",price:0,active:!0}]}),w++)}(e,u,l),function(e,t,n){var a=m(t.children).filter((function(e){return e.classList.contains("data-maker__add--subcategory")}))[0],o=t.querySelector(".data-maker__add--product");a===e&&(a.insertAdjacentHTML("beforebegin",r(w,"подкатегории")),null!==o&&o.remove(),"subCategory"in n?n.subCategory.push({id:w,name:""}):O=d.appendProps(O,n,{subCategory:[{id:w,name:""}]}),w++)}(e,u,l),u.classList.contains("data-maker__fields--product")&&(function(e,t,n,r){var a=t.querySelector(".data-maker__add--desc");a===e&&(a.insertAdjacentHTML("beforebegin",o(n)),a.style.display="none",O=d.appendProps(O,r,{desc:void 0}));var i=t.querySelector(".data-maker__field-wrap--desc");null!==i&&t.querySelector(".data-maker__delete-btn--desc")===e&&(i.remove(),r.desc=void 0,a.style.display="")}(e,u,u.id,l),function(e,t,n,r){var a=t.querySelector(".data-maker__add--option-wrap"),o=t.querySelector(".data-maker__input--price-product");a===e&&(a.insertAdjacentHTML("beforebegin",c(n)),a.style.display="none",t.querySelector(".data-maker__input--option-price").value=Number(o.value),O=d.appendProps(O,r,{options:{nameOptionList:"",optionList:[{optionName1:!0,price:Number(o.value)}]}}));var u=t.querySelector(".data-maker__option-wrap");if(null!==u){var l=u.querySelector(".data-maker__add--option-item"),s=u.querySelectorAll(".data-maker__option-num"),f=s[s.length-1].textContent,m=u.querySelector(".data-maker__option");if(l===e){var y;f++,m.insertAdjacentHTML("beforeend",i(n,f));var v=m.querySelectorAll(".data-maker__input--option-price");v[v.length-1].value=o.value,r.options.optionList.push((p(y={},"optionName"+f,!0),p(y,"price",Number(o.value)),y))}t.querySelector(".data-maker__delete-btn--option")===e&&(u.remove(),r.options=void 0,a.style.display="")}}(e,u,u.id,l)),u.querySelector(".data-maker__delete-btn--fields")===e){O=d.removeObject(O,l);var s=function(e,t){return'<div class="data-maker__add data-maker__add--'.concat(e,'" tabindex="0">\n        + Добавить ').concat(t,"\n      </div>")};if(null===u.parentNode.querySelector(".data-maker__add--subcategory")&&u.parentNode!==b&&u.parentNode.insertAdjacentHTML("beforeend",s("subcategory","подкатегорию")),void 0===m(u.parentNode.children).filter((function(e){return e.classList.contains("data-maker__add--product")}))[0]&&u.parentNode!==b)m(u.parentNode.children).filter((function(e){return e.classList.contains("data-maker__add--subcategory")}))[0].insertAdjacentHTML("beforebegin",s("product","товар"));u.remove()}var f=u.querySelector(".data-maker__hide-btn");f===e&&(u.classList.toggle("data-maker__fields--collapse"),"Скрыть"===f.textContent?f.textContent="Показать":f.textContent="Скрыть")}if(x===e){if(b.checkValidity()&&0===O.length){x.insertAdjacentHTML("beforebegin",'<span class="message-to-create">Может быть нужно добавить товар или категорию?</span>'),event.preventDefault()}if(b.checkValidity()&&O.length>0){E.style.display="";var y=JSON.stringify(j),v=JSON.stringify(O);q.textContent=y+v,event.preventDefault()}}console.log("productList :",O)},M=function(e,t,n){e.oninput=l((function(){t[n]=e.value}),500)},I=function(){b.onclick=function(){N(),P()},b.onkeydown=function(){var e;e=e||event,/textarea/i.test((e.target||e.srcElement).tagName)||e.keyCode||e.which||e.charCode,event.keyCode===_&&(N(),P())}};M(h,j,"userId"),M(k,j,"currency"),I(),L.on("success",(function(e){e.trigger.textContent="Скопировано! Вставьте этот текст после кода магазина",e.clearSelection(),window.setTimeout((function(){e.trigger.textContent="Скопировать информацию"}),4e3)}))}()}();